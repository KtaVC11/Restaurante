jQuery(function(u){var t,e,n,i,c,a,d=wcpcd_ajax.json,p=u.extend({placeholderOption:"first",width:"100%"},function(){if("undefined"!=typeof wc_country_select_params)return{language:{errorLoading:function(){return wc_country_select_params.i18n_searching},inputTooLong:function(t){var e=t.input.length-t.maximum;return 1===e?wc_country_select_params.i18n_input_too_long_1:wc_country_select_params.i18n_input_too_long_n.replace("%qty%",e)},inputTooShort:function(t){var e=t.minimum-t.input.length;return 1===e?wc_country_select_params.i18n_input_too_short_1:wc_country_select_params.i18n_input_too_short_n.replace("%qty%",e)},loadingMore:function(){return wc_country_select_params.i18n_load_more},maximumSelected:function(t){return 1===t.maximum?wc_country_select_params.i18n_selection_too_long_1:wc_country_select_params.i18n_selection_too_long_n.replace("%qty%",t.maximum)},noResults:function(){return wc_country_select_params.i18n_no_matches},searching:function(){return wc_country_select_params.i18n_searching}}}}());function o(){var t=u("select.country_select"),e=t.attr("id"),n=t.val();""!=n&&t.parents(".form-row").data("val",n).data("id",e)}function r(t,e){var n=t.closest("div").find(".country_to_state").val(),i=d[n][e],c=t.val();if(""!=wcpcd_ajax.json){if(t.is("input")){var a=t.attr("name"),o=t.attr("id"),r=t.attr("placeholder");c=t.val();t.replaceWith('<select name="'+a+'" id="'+o+'" class="city_select" data-value="'+c+'" placeholder="'+r+'"></select>'),t=u("#"+o)}else t.prop("disabled",!1);var l="";for(var _ in i)if(i.hasOwnProperty(_)){var s=i[_].city;l=l+'<option value="'+s+'">'+s+"</option>"}t.html('<option value="">'+wcpcd_ajax.city_first_option+"</option>"+l),""!=c&&u('option[value="'+c+'"]',t).length?t.val(c).change():t.val(t.find("option:eq(1)").val()).change(),t.length&&t.select2(p),u(document.body).trigger("city_to_select")}}function l(t,e,n,i){var c=e.find(".country_to_state").val(),a=d[c][n];for(var o in a)a.hasOwnProperty(o)&&a[o].city===i&&e.find('input[id*="postcode"]').val(a[o].zip)}function _(){var t=u("#_billing_state"),e=t.val()||woocommerce_admin_meta_boxes_order.default_state;t.length&&r(u("#_billing_city"),e)}function s(){var t=u("#_shipping_state"),e=t.val()||woocommerce_admin_meta_boxes_order.default_state;t.length&&r(u("#_shipping_city"),e)}t=u("select.state_select"),e=u('input[id*="_city"]'),n=t.attr("id"),i=t.val(),c=e.attr("id"),a=e.val(),setTimeout(function(){""!=i?t.parents(".form-row").data("val",i).data("id",n):(u("select.state_select option").each(function(){if(cur=u(this).not(":empty").first().val(),cur)return!1}),t.val(cur)),t.trigger("change"),""!=a&&(e.parents(".form-row").data("val",a).data("id",c),t.trigger("change"))},450),o(),u(document.body).on("click",".shipping-calculator-button",function(){setTimeout(function(){u("#calc_shipping_state").trigger("change")},200)}),u(document).on("change","select.country_to_state",function(){var t=u(this).closest(".form-row").parent(),e=u(this).val();u(document.body).trigger("country_changing",[e,t]),o()}),u(document).on("change","select.state_select",function(){var t=u(this).closest(".form-row").parent(),e=u(this).val(),n=t.find(".country_to_state").val();(null!=d[n]||u(".woocommerce-shipping-calculator").length)&&u(document.body).trigger("state_changing",[e,t])}),u(document).on("change","select.city_select",function(){var t=u(this).closest(".form-row").parent(),e=t.find("select.state_select").val(),n=u(this).val(),i=t.find(".country_to_state").val();null!=d[i]&&u(document.body).trigger("update_checkout").trigger("city_changing",[e,n,t])}),u("body").on("country_changing",function(t,e,n){!function(t,e,n,i){var c=t.val(),a=e.val();t.is("select")&&(c=c||t.find("option:eq(1)").val(),t.val(c),t.length&&(t.select2(p),t.trigger("change")));if(e.is("select")&&void 0===d[n]){var o=e.attr("name"),r=e.attr("id"),l=e.attr("placeholder");e.replaceWith('<input type="text" name="'+o+'" id="'+r+'" class="city_select input-text" placeholder="'+l+'" />'),a&&u("#"+r).val(a),(e=u("#"+r)).next(".select2").remove(),t.val(c)}}(n.find("select.state_select"),n.find("select.city_select"),e)}),u("body").on("state_changing",function(t,e,n){r(n.find("#billing_city, #shipping_city, #calc_shipping_city"),e)}),u("body").on("city_changing",function(t,e,n,i){l(i.find("#billing_city, #shipping_city, #calc_shipping_city"),i,e,n)}),u(document).on("click","a.edit_address",function(t){u(document).trigger("wcadmin_order_edit_billing_address_click")}),u(document).on("wcadmin_order_edit_billing_address_click",function(t){_(),s()}),u(document).on("change","#_billing_state",_),u(document).on("change","#_shipping_state",s),u(document).on("change","#_billing_city, #_shipping_city",function(){var t=u(this).closest("div"),e=t.find("select.js_field-state").val(),n=u(this).val();l(u(this),t,e,n)})});